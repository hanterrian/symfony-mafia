# Symfony mafia game

- Twig
- Alpine.js
- Mercure
- Bootstrap 5 (Asset Mapper)
- Symfony Forms
- Twig-компоненты

## Домашняя страница

Тут есть две формы в которых можно либо создать свою игру (вводится название и имя ведущего),
либо присоединиться к уже существующей (вводится код игры и имя игрока).

## Лобби

После создания игры или присоединения к уже существующей, вы попадаете в лобби.
Ведущий тут выдает роли игрокам, а игроки могут посмотреть свою роль. Роль невидима для других игроков.
После ведущий начинает игру. Игроки могут присоеденится к игре только до ее начала, те только на стадии лобби.

## Игра

Игра состоит из нескольких фаз: ночь, день, голосование.

### Ночь

Ведущий начинает ночь и игроки выполняют свои действия. Например, мафия убивает игрока, доктор лечит игрока, шериф
пытается вычислить мафию.

### День

Ведущий начинает день и игроки обсуждают произошедшее. После обсуждения игроки голосуют за казнь одного из игроков.

### Голосование

Ведущий начинает голосование и игроки голосуют за казнь одного из игроков. После голосования показывает кого казнили.

## Конец игры

Игра заканчивается когда остается одна из сторон: мафия или мирные жители.

## Дополнительно

- Ведущий видит оба чата и может писать в оба.
- Ведущего нет в списке на голосование.
- У каждой игры есть свой чат, в котором игроки могут общаться между собой.
- У мафии есть свой чат, в котором мафия может общаться между собой.
- Голосование происходит в реальном времени, игроки не видят результата до тех пор пока все кроме ведущего не
  проголосуют, ведущий не участвует в голосовании.
- Переход между фазами проихсодит автоматически, после того как ведущий нажмет кнопку "Следующая фаза".
- "мертвый игрок" не может писать в чат, но видит оба чата, также он не участвует в голосовании, помечается меткой в
  списке игроков и становится видна его роль.
- Все фазы игры переключаются в режиме реального времени, как и чаты так и голосования, те не требуют перезагрузки
  страницы чтобы увидеть изменения.

## Роли

- Ведущий - видит оба чата и может писать в оба, может начать игру, переключать фазы, выдавать роли, не участвует в
  голосовании.
- Мафия - видит чат мафии, может писать в чат мафии, голосует за того кто умрет из мирных жителей, также может убить
  доктора, шерифа или другую мафию.
- Доктор - видит только чат мирных жителей, может писать в чат мирных жителей, может лечить игрока, не может лечить
  себя.
- Шериф - видит только чат мирных жителей, может писать в чат мирных жителей, может проверить игрока на мафию.
- Мирный житель - видит только чат мирных жителей, может писать в чат мирных жителей, голосует за казнь игрока.

`docker compose build --no-cache`

`docker compose up --pull always -d --wait`

`docker compose down --remove-orphans`

`docker compose exec php bash`
